#include "FX_Reverb.h"

#include "../controls/Potentiometer.h"
#include "../controls/Switch.h"
#include "../controls/Button.h"

#include "../controls/OutputSocket.h"
#include "../controls/InputSocket.h"

#include <vector>
#include <Audio.h>
#include <cstdint>

namespace {
	enum _inputSockets {IN};
	enum _outputSockets {OUT};
};

//ctor
Reverb :: Reverb (const Address& a)
	:	Module(a),
		_roomsize_pot0	(a, 0),
		_damping_pot1	(a, 1),
		_rev()
	{
	
	outputSockets.push_back(std::make_shared<OutputSocket>(a, OUT,99, _rev, 0));
	inputSockets.push_back(std::make_shared<InputSocket>(a, IN,99, _rev, 0));
}

void
Reverb :: updateValues() {
	if(_roomsize_pot0.wasUpdated())
		_rev->roomsize(_roomsize_pot0.f_read());
	if(_damping_pot1.wasUpdated())
		_rev->damping(_damping_pot1.f_read());
}
